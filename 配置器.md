# saxjs Config

今天需要实现一个配置器

1. 配置器 应该是可以支持 json  hjson 以及 js 的配置文件
2. 应该满足任何地方都可以调用
3. 应该满足反向生存配置文件

找到一个 hjson 的模块，可以支持 注释等写法。可以用于加以改装，实现我们的配置文件项。

首先需要实现一个可以设置默认读取数据的配置文件夹目录，在默认情况下 所有配置文件应该放在这里。
### 设置目录
```
Config.setDir(dirname)
Config.getDir();
```
还需实现一个装载器进行载入配置文件 默认情况下 hjson 可不需要后缀,如果指定加载的路径 则从指定路径加载配置文件，否则从默认文件夹中加载文件。
### 单项加载
```
Config.load(name)  //在系统默认目录下寻找 [name].hjson   [name].json  [name].config.js
Config.load(name,path) //指定加载的文件路径，并改别名 name
```
### 全局加载
有些时候 我们需要将配置文件写入全局配置，这个时候我还需要提供一个加载到全局配置项的加载器

```
Config.gload(name)
Config.gload(name,path)
```

在这里我需要一个约定  在所有的配置文件项中 name 是不可重复的，如重复 则将会覆盖原来同名的数据。

OK 现在我们可以来考虑我们如何获取 配置项了
### 获取值
```
Config.get(key,def='') 
```
key 可以如下形式
```
name:keyone.keytwo //指定配置项名称取值
key.two //从全局配置项中取值
key 
```
在这里我有个约定 我希望写入的配置项键名不存在 . 以及 : 和 * 的符号

有时候我们需要获得所有配置项内容
```
我们可以 让key = *
如：
Config.get('name:*') //获取配置项 name 下的所有配置
Config.get('*') //获取全局所有配置项
```
我们还可能需要一些 默认值，默认值必须是对象形式
```
如：
Config.get('name:*',{a:23,test:'wj008'}) //这里当没有找到键名的情况下可用，配置项为null并不会替换
Config.get('*',{a:23,test:'wj008'}) //这里当没有找到键名的情况下可用，配置项为null并不会替换
```

### 设置值
设置值得方式和获取值 有相似 如键名
```
Config.set(key,val) 
当key 
如键名 one 的时候 覆盖全局键名 one 的值
如键名 test:one 的时候  覆盖test配置项下的 one的值
当键名为 * 的时候 值需要是一个对象 并遍历替换 值
或者 test:*

```

### 保存配置项
这个功能 只是把一些配置值保存到文件中去，并不对原配置项有任何影响。

Config.save(filepath,data) 

